// æ©Ÿèƒ½å˜ä½ã®å®Ÿè£…çŠ¶æ³ãƒãƒˆãƒªã‚¯ã‚¹
// âœ…: å®Ÿè£…å®Œäº†
// ğŸ”„: å®Ÿè£…ä¸­/ä¸€éƒ¨å®Ÿè£…  
// âŒ: æœªå®Ÿè£…
// ï¼: ä¸è¦

/*
| æ©Ÿèƒ½ | Model | Service | ViewModel | View/Page |
|------|--------|----------|------------|------------|
| **ã‚¹ãƒ¬ãƒƒãƒ‰ä¸€è¦§** |
| - ã‚¹ãƒ¬ãƒƒãƒ‰ä¸€è¦§è¡¨ç¤º | âœ… ChatThread | âœ… IChatDataManager | âœ… ThreadListViewModel | âœ… ThreadListControl |
| - ã‚¹ãƒ¬ãƒƒãƒ‰é¸æŠ | âœ… ChatThread | âœ… IChatDataManager | âœ… MainViewModel | âœ… ThreadListControl |
| **ã‚¹ãƒ¬ãƒƒãƒ‰ä½œæˆ** |
| - ã‚¹ãƒ¬ãƒƒãƒ‰ä½œæˆ | âœ… ChatThread | âœ… IChatDataManager | âœ… ThreadSettingsViewModel | âŒ ThreadSettingsPage |
| - ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè¨­å®š | âœ… ChatThread | âœ… ISettingsService | âœ… ThreadSettingsViewModel | âŒ ThreadSettingsPage |
| **ãƒãƒ£ãƒƒãƒˆ** |
| - ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º | âœ… Message, MessageElement | âœ… IChatDataManager | âœ… MainViewModel | âœ… MainPage |
| - ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡ | âœ… Message | âœ… IChatDataManager | âœ… MainViewModel | âœ… MainPage |
| - APIé€šä¿¡ | ï¼ | âœ… ILLMApiService | âœ… | ï¼ |
| **é–‹ç™ºè€…è¨­å®š** |
| - APIã‚­ãƒ¼ç®¡ç† | ï¼ | âœ… ISettingsService | âœ… DevMenuViewModel | âœ… DevMenuPage |
| - ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ | ï¼ | âŒ ISettingsService?? | ?? DevMenuViewModel | ?? DevMenuPage |
| **èªè¨¼/è¨­å®šä¿å­˜** |
| - APIã‚­ãƒ¼ä¿å­˜ | ï¼ | âœ… ISecureStorage | âœ… ISettingsService | ï¼ |
| - ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆä¿å­˜ | ï¼ | âŒ ISecureStorage?? | âŒ ISettingsService?? | ï¼ |
*/

## 1. ãƒ•ã‚©ãƒ«ãƒ€æ§‹æˆ
```
MauiApp1ChatWithAI/
â”œâ”€â”€ Extensions/
â”‚   â””â”€â”€ TaskExtensions.cs         // éåŒæœŸå‡¦ç†ç”¨ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”œâ”€â”€ Models/
â”‚   â”œâ”€â”€ Database/                 // DBãƒ¢ãƒ‡ãƒ«
â”‚   â”‚   â”œâ”€â”€ ChatThread.cs
â”‚   â”‚   â”œâ”€â”€ Message.cs
â”‚   â”‚   â””â”€â”€ MessageElement.cs
â”‚   â””â”€â”€ MessageDisplay.cs         // UIè¡¨ç¤ºç”¨ãƒ¢ãƒ‡ãƒ«
â”œâ”€â”€ ViewModels/
â”‚   â”œâ”€â”€ ViewModelBase.cs
â”‚   â”œâ”€â”€ MainViewModel.cs
â”‚   â”œâ”€â”€ ThreadSettingsViewModel.cs
â”‚   â””â”€â”€ DevMenuViewModel.cs
â”œâ”€â”€ Views/
â”‚   â”œâ”€â”€ MainPage.xaml
â”‚   â”œâ”€â”€ ThreadSettingsPage.xaml
â”‚   â”œâ”€â”€ DevMenuPage.xaml
â”‚   â””â”€â”€ ThreadListControl.xaml
â””â”€â”€ Services/
    â”œâ”€â”€ IChatDataManager.cs
    â”œâ”€â”€ ChatDataManager.cs
    â”œâ”€â”€ ILLMApiService.cs
    â”œâ”€â”€ ClaudeApiService.cs
    â”œâ”€â”€ ISecureStorageService.cs
    â””â”€â”€ ChatService.cs

KPT
/*
# Keepï¼ˆè‰¯ã‹ã£ãŸç‚¹ãƒ»ç¶™ç¶šã—ãŸã„ã“ã¨ï¼‰
- æ—¢å­˜ã®PoCã‚³ãƒ¼ãƒ‰ã‚’å‚è€ƒã«å®Ÿè£…ã§ããŸ
- MVVMãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’é©åˆ‡ã«ä½¿ç”¨ã§ããŸ
- ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®è²¬å‹™ã‚’é©åˆ‡ã«åˆ†é›¢ã§ããŸï¼ˆThreadListControlãªã©ï¼‰
- ãƒ‡ãƒãƒƒã‚°æ™‚ã«ã‚¨ãƒ©ãƒ¼åŸå› ã‚’æ®µéšçš„ã«è¿½ãˆãŸ
- ã‚¤ãƒ™ãƒ³ãƒˆè³¼èª­è§£é™¤ãªã©ã®é‡è¦ãªå®Ÿè£…ã‚’å¿˜ã‚Œãšã«è¡ŒãˆãŸ

# Problemï¼ˆèª²é¡Œãƒ»å•é¡Œç‚¹ï¼‰
- ChatServiceã®åˆæœŸåŒ–æ¼ã‚ŒãŒã‚ã£ãŸ
- å®Ÿè£…ã®å„ªå…ˆé †ä½ä»˜ã‘ãŒæ›–æ˜§ã ã£ãŸ
- æ—¢å­˜ã‚³ãƒ¼ãƒ‰ã®ç¢ºèªãŒä¸ååˆ†ãªã‚±ãƒ¼ã‚¹ãŒã‚ã£ãŸ
- ViewModelã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãŒä¸å®Œå…¨
- UIã®ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°ãŒå¾Œå›ã—ã«ãªã£ã¦ã„ã‚‹

# Tryï¼ˆæ¬¡å›ã«å‘ã‘ã¦ã®æ”¹å–„æ¡ˆï¼‰
- å®Ÿè£…å‰ã«ã‚ˆã‚Šè©³ç´°ãªè¨­è¨ˆãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’è¡Œã†
- ã‚µãƒ¼ãƒ“ã‚¹ã‚¯ãƒ©ã‚¹ã®åˆæœŸåŒ–å‡¦ç†ã‚’æ¼ã‚Œãªããƒã‚§ãƒƒã‚¯
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®çµ±ä¸€çš„ãªæ–¹é‡ã‚’æ±ºã‚ã‚‹
- ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°ã®ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ã‚’äº‹å‰ã«æ±ºã‚ã‚‹
- ViewModelã®ãƒ†ã‚¹ãƒˆã‚’æ›¸ã
- çŠ¶æ…‹ç®¡ç†ï¼ˆLoading/ErrorçŠ¶æ…‹ãªã©ï¼‰ã‚’ã‚ˆã‚Šæ˜ç¢ºã«å®Ÿè£…ã™ã‚‹

# æ¬¡ã®ã‚¿ã‚¹ã‚¯ã®å„ªå…ˆé †ä½
1. ThreadSettingsPageã®å®Ÿè£…
  - æ–°è¦ã‚¹ãƒ¬ãƒƒãƒ‰ä½œæˆæ©Ÿèƒ½ã¯é‡è¦ãªåŸºæœ¬æ©Ÿèƒ½
  - ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè¨­å®šã‚‚å«ã‚ã‚‹

2. ISettingsServiceã®å®Ÿè£…
  - APIã‚­ãƒ¼ç®¡ç†ã‚„ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆä¿å­˜ã®åŸºç›¤ã¨ãªã‚‹
  - è¨­å®šã®æ°¸ç¶šåŒ–ã«å¿…è¦

3. DevMenuPageã®å®Ÿè£…
  - é–‹ç™ºåŠ¹ç‡åŒ–ã®ãŸã‚ã«å¿…è¦
  - ãƒ‡ãƒãƒƒã‚°ã‚„ãƒ†ã‚¹ãƒˆã«å½¹ç«‹ã¤
*/