<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:views="clr-namespace:MauiApp1ChatWithAI.Views"
             x:Class="MauiApp1ChatWithAI.Views.MainPage">

    <Grid>
        <!-- メインコンテンツ -->
        <Grid RowDefinitions="Auto,*,Auto">
            <!-- ヘッダー -->
            <Grid Grid.Row="0" 
                  Padding="16"
                  ColumnDefinitions="Auto,*,Auto,Auto"
                  BackgroundColor="White">
                <Button Grid.Column="0"
                        Command="{Binding ToggleSidebarCommand}"
                        HeightRequest="40"
                        WidthRequest="40"
                        Padding="0">
                    <Button.ImageSource>
                        <FontImageSource Glyph="☰"
                                       Color="Black"/>
                    </Button.ImageSource>
                </Button>

                <Label Grid.Column="1"
                       Text="Chat App"
                       FontSize="20"
                       FontAttributes="Bold"
                       VerticalOptions="Center"
                       Margin="16,0"/>

                <Button Grid.Column="2"
                        Text="+ New Chat"
                        Margin="8,0"/>

                <Button Grid.Column="3"
                        Text="Settings"/>
            </Grid>

            <!-- チャットエリア -->
            <Grid Grid.Row="1">
                <Label Text="Select a thread to start chatting"
                       HorizontalOptions="Center"
                       VerticalOptions="Center"/>
            </Grid>

            <!-- メッセージ入力エリア -->
            <Grid Grid.Row="2"
                  Padding="16"
                  BackgroundColor="White">
                <!-- 後で実装 -->
            </Grid>
        </Grid>

        <!-- サイドバー（左側に配置） -->
        <Grid x:Name="SidebarPanel"
              WidthRequest="300"
              HorizontalOptions="Start"
              BackgroundColor="White"
              TranslationX="{Binding SidebarTranslation}">
            <views:ThreadListControl 
                BindingContext="{Binding ThreadListViewModel}"/>
        </Grid>

        <!-- オーバーレイ -->
        <!--<Grid BackgroundColor="#80000000"
              IsVisible="{Binding IsSidebarOpen}">
            <Grid.GestureRecognizers>
                <TapGestureRecognizer Command="{Binding ToggleSidebarCommand}"/>
            </Grid.GestureRecognizers>
        </Grid>-->
    </Grid>

</ContentPage>